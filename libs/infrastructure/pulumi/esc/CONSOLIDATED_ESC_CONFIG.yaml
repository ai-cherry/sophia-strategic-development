# Sophia AI - CONSOLIDATED Pulumi ESC Configuration
# This is the SINGLE SOURCE OF TRUTH for all secrets and configuration
# Generated by consolidation script - DO NOT EDIT MANUALLY

imports:
  - type: github-secrets
    github:
      organization: ai-cherry
      repository: sophia-main

values:
  # AI Services (Critical for MCP Project)
  ai_services:
    openai:
      api_key:
        fn::secret: ${OPENAI_API_KEY}
    anthropic:
      api_key:
        fn::secret: ${ANTHROPIC_API_KEY}
    portkey:
      api_key:
        fn::secret: ${PORTKEY_API_KEY}
    openrouter:
      api_key:
        fn::secret: ${OPENROUTER_API_KEY}

  # Business Intelligence (MCP Project Core)
  business_intelligence:
    gong:
      access_key:
        fn::secret: ${GONG_ACCESS_KEY}
      access_key_secret:
        fn::secret: ${GONG_ACCESS_KEY_SECRET}
      client_secret:
        fn::secret: ${GONG_CLIENT_SECRET}
    hubspot:
      access_token:
        fn::secret: ${HUBSPOT_ACCESS_TOKEN}
      client_secret:
        fn::secret: ${HUBSPOT_CLIENT_SECRET}
    linear:
      api_key:
        fn::secret: ${LINEAR_API_KEY}
    notion:
      api_key:
        fn::secret: ${NOTION_API_KEY}
    asana:
      api_token:
        fn::secret: ${ASANA_API_TOKEN}
    slack:
      bot_token:
        fn::secret: ${SLACK_BOT_TOKEN}
      webhook_url:
        fn::secret: ${SLACK_WEBHOOK_URL}

  # Data Infrastructure
  data_infrastructure:
    qdrant:
      api_key:
        fn::secret: ${QDRANT_API_KEY}
      url:
        fn::secret: ${QDRANT_URL}
      cluster_name: "sophia-ai-production"
    redis:
      password:
        fn::secret: ${REDIS_PASSWORD}
      url:
        fn::secret: ${REDIS_URL}
    postgres:
      host:
        fn::secret: ${POSTGRES_HOST}
      password:
        fn::secret: ${POSTGRES_PASSWORD}
      database:
        fn::secret: ${POSTGRES_DATABASE}
      username:
        fn::secret: ${POSTGRES_USERNAME}

  # Infrastructure
  infrastructure:
    lambda_labs:
      api_key:
        fn::secret: ${LAMBDA_API_KEY}
      ssh_private_key:
        fn::secret: ${LAMBDA_SSH_PRIVATE_KEY}
      region: "us-west-1"
    docker:
      hub_access_token:
        fn::secret: ${DOCKER_HUB_ACCESS_TOKEN}
      username:
        fn::secret: ${DOCKER_HUB_USERNAME}
    pulumi:
      access_token:
        fn::secret: ${PULUMI_ACCESS_TOKEN}
    github:
      token:
        fn::secret: ${GITHUB_TOKEN}
      pat:
        fn::secret: ${GITHUB_PAT}

# Environment Variables for Runtime (MCP Project Focus)
environmentVariables:
  # AI Services
  OPENAI_API_KEY: ${ai_services.openai.api_key}
  ANTHROPIC_API_KEY: ${ai_services.anthropic.api_key}
  PORTKEY_API_KEY: ${ai_services.portkey.api_key}
  OPENROUTER_API_KEY: ${ai_services.openrouter.api_key}
  
  # Business Intelligence (MCP Project Critical)
  GONG_ACCESS_KEY: ${business_intelligence.gong.access_key}
  GONG_ACCESS_KEY_SECRET: ${business_intelligence.gong.access_key_secret}
  GONG_CLIENT_SECRET: ${business_intelligence.gong.client_secret}
  HUBSPOT_ACCESS_TOKEN: ${business_intelligence.hubspot.access_token}
  HUBSPOT_CLIENT_SECRET: ${business_intelligence.hubspot.client_secret}
  LINEAR_API_KEY: ${business_intelligence.linear.api_key}
  NOTION_API_KEY: ${business_intelligence.notion.api_key}
  ASANA_API_TOKEN: ${business_intelligence.asana.api_token}
  SLACK_BOT_TOKEN: ${business_intelligence.slack.bot_token}
  SLACK_WEBHOOK_URL: ${business_intelligence.slack.webhook_url}
  
  # Data Infrastructure
  QDRANT_API_KEY: ${data_infrastructure.qdrant.api_key}
  QDRANT_URL: ${data_infrastructure.qdrant.url}
  REDIS_PASSWORD: ${data_infrastructure.redis.password}
  REDIS_URL: ${data_infrastructure.redis.url}
  POSTGRES_HOST: ${data_infrastructure.postgres.host}
  POSTGRES_PASSWORD: ${data_infrastructure.postgres.password}
  POSTGRES_DATABASE: ${data_infrastructure.postgres.database}
  POSTGRES_USERNAME: ${data_infrastructure.postgres.username}
  
  # Infrastructure
  LAMBDA_API_KEY: ${infrastructure.lambda_labs.api_key}
  LAMBDA_SSH_PRIVATE_KEY: ${infrastructure.lambda_labs.ssh_private_key}
  DOCKER_HUB_ACCESS_TOKEN: ${infrastructure.docker.hub_access_token}
  DOCKER_HUB_USERNAME: ${infrastructure.docker.username}
  PULUMI_ACCESS_TOKEN: ${infrastructure.pulumi.access_token}
  GITHUB_TOKEN: ${infrastructure.github.token}
  GITHUB_PAT: ${infrastructure.github.pat}
