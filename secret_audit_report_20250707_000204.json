{
  "timestamp": "2025-07-07T00:02:04.370351",
  "findings": {
    "secret_files": [],
    "sync_scripts": [
      "/Users/lynnmusil/sophia-main/backup_deployment_fix_20250705_135353/github_workflows/sync_secrets.yml",
      "/Users/lynnmusil/sophia-main/infrastructure/esc/sync_secrets_ci.sh",
      "/Users/lynnmusil/sophia-main/verify_complete_secrets_sync.py",
      "/Users/lynnmusil/sophia-main/secret_sync_report.json",
      "/Users/lynnmusil/sophia-main/backup_deployment_fix_20250705_135353/github_workflows/archive/unified-secret-sync.yml",
      "/Users/lynnmusil/sophia-main/infrastructure/esc/enhanced_secret_sync_monitor.py",
      "/Users/lynnmusil/sophia-main/backup_deployment_fix_20250705_135353/github_workflows/archive/pulumi-esc-sync.yml"
    ],
    "workflows": [
      "/Users/lynnmusil/sophia-main/.github/workflows/sophia-production-deployment.yml",
      "/Users/lynnmusil/sophia-main/.github/workflows/dead-code-prevention.yml",
      "/Users/lynnmusil/sophia-main/.github/workflows/sync_secrets.yml",
      "/Users/lynnmusil/sophia-main/.github/workflows/deploy-mcp-production.yml",
      "/Users/lynnmusil/sophia-main/.github/workflows/mcp-version-validation.yml"
    ],
    "config_files": [
      "/Users/lynnmusil/sophia-main/pulumi-esc-configuration.yaml",
      "/Users/lynnmusil/sophia-main/fix_pulumi_esc_structure_mismatch.py",
      "/Users/lynnmusil/sophia-main/pulumi-esc-github-imports.yaml",
      "/Users/lynnmusil/sophia-main/pulumi-esc-production-config.yaml",
      "/Users/lynnmusil/sophia-main/infrastructure/pulumi-esc-update.py",
      "/Users/lynnmusil/sophia-main/infrastructure/pulumi-esc-comprehensive-update.py",
      "/Users/lynnmusil/sophia-main/backup_deployment_fix_20250705_135353/github_workflows/archive/pulumi-esc-sync.yml",
      "/Users/lynnmusil/sophia-main/backend/core/auto_esc_config.py",
      "/Users/lynnmusil/sophia-main/scripts/security/setup_pulumi_esc_secrets.py",
      "/Users/lynnmusil/sophia-main/external/anthropic-mcp-python-sdk/tests/server/fastmcp/test_parameter_descriptions.py",
      "/Users/lynnmusil/sophia-main/external/anthropic-mcp-python-sdk/examples/fastmcp/parameter_descriptions.py",
      "/Users/lynnmusil/sophia-main/external/anthropic-mcp-inspector/client/src/utils/escapeUnicode.ts",
      "/Users/lynnmusil/sophia-main/external/anthropic-mcp-inspector/client/src/utils/__tests__/escapeUnicode.test.ts",
      "/Users/lynnmusil/sophia-main/infrastructure/pulumi/esc-config.yaml",
      "/Users/lynnmusil/sophia-main/cleanup_backup_20250706_180710/scripts/implement_enhanced_pulumi_esc.py",
      "/Users/lynnmusil/sophia-main/backups/scripts_cleanup_20250705_162819/validate_pulumi_esc_secrets.py",
      "/Users/lynnmusil/sophia-main/backups/scripts_cleanup_20250705_162819/test_mcp_pulumi_esc_integration.py",
      "/Users/lynnmusil/sophia-main/scripts/security/setup_pulumi_esc_secrets.py",
      "/Users/lynnmusil/sophia-main/backups/scripts_cleanup_20250705_162819/validate_pulumi_esc_secrets.py",
      "/Users/lynnmusil/sophia-main/backend/core/auto_esc_config.py",
      "/Users/lynnmusil/sophia-main/scripts/snowflake_config_manager.py",
      "/Users/lynnmusil/sophia-main/backend/core/config_manager.py",
      "/Users/lynnmusil/sophia-main/backend/core/snowflake_config_manager.py",
      "/Users/lynnmusil/sophia-main/backend/core/centralized_config_manager.py",
      "/Users/lynnmusil/sophia-main/backend/core/sophia_env_config.py"
    ],
    "secret_references": [
      {
        "file": "/Users/lynnmusil/sophia-main/backup_deployment_fix_20250705_135353/github_workflows/sync_secrets.yml",
        "type": "github_secrets",
        "secrets": [
          "PIPEDREAM_API_KEY",
          "WEAVIATE_URL",
          "HUBSPOT_ACCESS_TOKEN",
          "OPENAI_API_KEY",
          "PROMETHEUS_URL",
          "ARIZE_API_KEY",
          "ELEVENLABS_API_KEY",
          "VERCEL_API_TOKEN",
          "STABILITY_API_KEY",
          "PHANTOMBUSTER_API_KEY",
          "GROQ_API_KEY",
          "BRAVE_API_KEY",
          "SLACK_BOT_TOKEN",
          "API_SECRET_KEY",
          "PINECONE_INDEX_NAME",
          "SNOWFLAKE_DATABASE_PROD",
          "SENTRY_DSN",
          "ASANA_API_TOKEN",
          "NPM_API_TOKEN",
          "LANGCHAIN_API_KEY",
          "WEAVIATE_GRPC_ENDPOINT",
          "RETOOL_API_TOKEN",
          "PULUMI_ACCESS_TOKEN",
          "LAMBDA_IP_ADDRESS",
          "WEAVIATE_API_KEY",
          "LAMBDA_API_KEY",
          "GH_API_TOKEN",
          "RECRAFT_API_KEY",
          "APIFY_API_TOKEN",
          "ENCRYPTION_KEY",
          "REDIS_URL",
          "TAVILY_API_KEY",
          "TOGETHER_AI_API_KEY",
          "NOTION_API_KEY",
          "LLAMA_API_KEY",
          "TWINGLY_API_KEY",
          "DOCKER_TOKEN",
          "SNOWFLAKE_ACCOUNT",
          "XAI_API_KEY",
          "ARIZE_SPACE_ID",
          "PINECONE_API_KEY",
          "DEEPSEEK_API_KEY",
          "SLACK_APP_TOKEN",
          "SNOWFLAKE_WAREHOUSE_ANALYTICS",
          "ANTHROPIC_API_KEY",
          "FIGMA_PAT",
          "VERCEL_ACCESS_TOKEN",
          "BACKUP_ENCRYPTION_KEY",
          "SLACK_SIGNING_SECRET",
          "HUGGINGFACE_API_TOKEN",
          "PINECONE_ENVIRONMENT",
          "ESTUARY_ACCESS_TOKEN",
          "SLACK_CLIENT_SECRET",
          "APOLLO_API_KEY",
          "LINEAR_API_KEY",
          "ZENROWS_API_KEY",
          "GRAFANA_PASSWORD",
          "VENICE_AI_API_KEY",
          "PORTKEY_API_KEY",
          "PERPLEXITY_API_KEY",
          "SERP_API_KEY",
          "AIRBYTE_ACCESS_TOKEN",
          "SNOWFLAKE_ROLE_PROD",
          "GRAFANA_URL",
          "OPENROUTER_API_KEY",
          "CODESTRAL_API_KEY",
          "EXA_API_KEY",
          "MISTRAL_API_KEY",
          "COHERE_API_KEY",
          "SNOWFLAKE_USER",
          "JWT_SECRET",
          "WEAVIATE_REST_ENDPOINT",
          "CODACY_API_TOKEN",
          "DOCKER_PERSONAL_ACCESS_TOKEN",
          "KONG_ACCESS_TOKEN",
          "SNOWFLAKE_PASSWORD",
          "SLACK_CLIENT_ID",
          "LAMBDA_SSH_PRIVATE_KEY",
          "QWEN_API_KEY",
          "SALESFORCE_ACCESS_TOKEN",
          "GRAFANA_USERNAME",
          "GONG_ACCESS_KEY"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/backup_deployment_fix_20250705_135353/github_workflows/archive/unified-secret-sync.yml",
        "type": "github_secrets",
        "secrets": [
          "PINECONE_ENVIRONMENT",
          "ASANA_PAT_TOKEN",
          "OPENROUTER_API_KEY",
          "GONG_CLIENT_SECRET",
          "HUBSPOT_API_KEY",
          "GITHUB_TOKEN",
          "VERCEL_PROJECT_ID",
          "SLACK_CLIENT_SECRET",
          "OPENAI_API_KEY",
          "SNOWFLAKE_USER",
          "GITHUB_PAT",
          "AGNO_API_KEY",
          "PULUMI_ACCESS_TOKEN",
          "SLACK_BOT_TOKEN",
          "SNOWFLAKE_PASSWORD",
          "SLACK_CLIENT_ID",
          "GONG_API_KEY",
          "SNOWFLAKE_ACCOUNT",
          "LINEAR_API_KEY",
          "PINECONE_API_KEY",
          "SLACK_REFRESH_TOKEN",
          "SALESFORCE_ACCESS_TOKEN",
          "SLACK_APP_TOKEN",
          "HUBSPOT_CLIENT_SECRET",
          "LLAMAINDEX_API_KEY",
          "ANTHROPIC_API_KEY",
          "VERCEL_ACCESS_TOKEN",
          "GONG_CLIENT_ID",
          "ESTUARY_API_KEY",
          "SLACK_SOCKET_TOKEN",
          "GONG_ACCESS_KEY_SECRET",
          "INTERCOM_ACCESS_TOKEN",
          "LAMBDA_LABS_API_KEY",
          "SLACK_SIGNING_SECRET"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/infrastructure/pulumi-esc-update.py",
        "type": "pulumi_refs",
        "secrets": [
          "set"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/backup_deployment_fix_20250705_135353/github_workflows/archive/pulumi-esc-sync.yml",
        "type": "github_secrets",
        "secrets": [
          "PULUMI_ACCESS_TOKEN",
          "GITHUB_TOKEN",
          "VERCEL_TOKEN"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/backend/core/auto_esc_config.py",
        "type": "get_config",
        "secrets": [
          "intercom_app_id",
          "gong_access_key",
          "lambda_ip_address",
          "snowflake_database",
          "jwt_secret",
          "jwt_algorithm",
          "hubspot_portal_id",
          "slack_app_token",
          "snowflake_password",
          "jwt_expiration_hours",
          "estuary_endpoint",
          "lambda_api_key",
          "estuary_tenant",
          "hubspot_access_token",
          "snowflake_account",
          "gong_access_key_secret",
          "snowflake_schema",
          "estuary_access_token",
          "slack_signing_secret",
          "snowflake_warehouse",
          "intercom_access_token",
          "snowflake_role",
          "slack_bot_token",
          "snowflake_user",
          "lambda_ssh_private_key"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/backend/core/auto_esc_config.py",
        "type": "pulumi_refs",
        "secrets": [
          "get"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/backups/scripts_cleanup_20250705_162819/validate_pulumi_esc_secrets.py",
        "type": "pulumi_refs",
        "secrets": [
          "set"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/backups/scripts_cleanup_20250705_162819/test_mcp_pulumi_esc_integration.py",
        "type": "pulumi_refs",
        "secrets": [
          "get"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/set_all_pulumi_secrets.sh",
        "type": "pulumi_refs",
        "secrets": [
          "set"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/backups/scripts_cleanup_20250705_162819/validate_pulumi_esc_secrets.py",
        "type": "pulumi_refs",
        "secrets": [
          "set"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/scripts/update-github-secrets-template.py",
        "type": "env_vars",
        "secrets": [
          "GITHUB_PAT"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/scripts/update_lambda_github_secrets_template.py",
        "type": "env_vars",
        "secrets": [
          "PULUMI_ACCESS_TOKEN",
          "LAMBDA_API_KEY",
          "GITHUB_PAT"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/backend/core/auto_esc_config.py",
        "type": "get_config",
        "secrets": [
          "intercom_app_id",
          "gong_access_key",
          "lambda_ip_address",
          "snowflake_database",
          "jwt_secret",
          "jwt_algorithm",
          "hubspot_portal_id",
          "slack_app_token",
          "snowflake_password",
          "jwt_expiration_hours",
          "estuary_endpoint",
          "lambda_api_key",
          "estuary_tenant",
          "hubspot_access_token",
          "snowflake_account",
          "gong_access_key_secret",
          "snowflake_schema",
          "estuary_access_token",
          "slack_signing_secret",
          "snowflake_warehouse",
          "intercom_access_token",
          "snowflake_role",
          "slack_bot_token",
          "snowflake_user",
          "lambda_ssh_private_key"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/backend/core/auto_esc_config.py",
        "type": "pulumi_refs",
        "secrets": [
          "get"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/scripts/snowflake_config_manager.py",
        "type": "get_config",
        "secrets": [
          "snowflake_password"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/restore_sophia_env.sh",
        "type": "get_config",
        "secrets": [
          "openai_api_key"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/migration_scripts/phase3_environments.sh",
        "type": "pulumi_refs",
        "secrets": [
          "set"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/backend/core/sophia_env_config.py",
        "type": "env_vars",
        "secrets": [
          "PULUMI_ACCESS_TOKEN",
          "ENVIRONMENT",
          "PULUMI_ORG"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/.github/workflows/sophia-production-deployment.yml",
        "type": "github_workflow",
        "secrets": [
          "PULUMI_ACCESS_TOKEN",
          "DOCKER_USER_NAME",
          "DOCKER_PERSONAL_ACCESS_TOKEN"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/.github/workflows/sync_secrets.yml",
        "type": "github_workflow",
        "secrets": [
          "LAMBDA_LABS_CLUSTER_SIZE",
          "PIPEDREAM_API_KEY",
          "WEAVIATE_URL",
          "HUBSPOT_ACCESS_TOKEN",
          "OPENAI_API_KEY",
          "PROMETHEUS_URL",
          "ARIZE_API_KEY",
          "ELEVENLABS_API_KEY",
          "VERCEL_API_TOKEN",
          "STABILITY_API_KEY",
          "PHANTOMBUSTER_API_KEY",
          "GROQ_API_KEY",
          "BRAVE_API_KEY",
          "SLACK_BOT_TOKEN",
          "API_SECRET_KEY",
          "PINECONE_INDEX_NAME",
          "SNOWFLAKE_DATABASE_PROD",
          "SENTRY_DSN",
          "ASANA_API_TOKEN",
          "NPM_API_TOKEN",
          "LANGCHAIN_API_KEY",
          "WEAVIATE_GRPC_ENDPOINT",
          "RETOOL_API_TOKEN",
          "PULUMI_ACCESS_TOKEN",
          "WEAVIATE_API_KEY",
          "GH_API_TOKEN",
          "RECRAFT_API_KEY",
          "APIFY_API_TOKEN",
          "LAMBDA_LABS_ASG_NAME",
          "LAMBDA_LABS_REGION",
          "ENCRYPTION_KEY",
          "REDIS_URL",
          "TAVILY_API_KEY",
          "TOGETHER_AI_API_KEY",
          "NOTION_API_KEY",
          "LLAMA_API_KEY",
          "TWINGLY_API_KEY",
          "DOCKER_TOKEN",
          "LAMBDA_LABS_INSTANCE_TYPE",
          "SNOWFLAKE_ACCOUNT",
          "XAI_API_KEY",
          "ARIZE_SPACE_ID",
          "PINECONE_API_KEY",
          "DEEPSEEK_API_KEY",
          "SLACK_APP_TOKEN",
          "LAMBDA_LABS_SHARED_FS_MOUNT",
          "SNOWFLAKE_WAREHOUSE_ANALYTICS",
          "ANTHROPIC_API_KEY",
          "FIGMA_PAT",
          "VERCEL_ACCESS_TOKEN",
          "BACKUP_ENCRYPTION_KEY",
          "SLACK_SIGNING_SECRET",
          "HUGGINGFACE_API_TOKEN",
          "PINECONE_ENVIRONMENT",
          "LAMBDA_LABS_SSH_PRIVATE_KEY",
          "ESTUARY_ACCESS_TOKEN",
          "SLACK_CLIENT_SECRET",
          "LAMBDA_LABS_MAX_CLUSTER_SIZE",
          "APOLLO_API_KEY",
          "LINEAR_API_KEY",
          "ZENROWS_API_KEY",
          "GRAFANA_PASSWORD",
          "VENICE_AI_API_KEY",
          "PORTKEY_API_KEY",
          "PERPLEXITY_API_KEY",
          "LAMBDA_LABS_API_KEY",
          "SERP_API_KEY",
          "AIRBYTE_ACCESS_TOKEN",
          "SNOWFLAKE_ROLE_PROD",
          "GRAFANA_URL",
          "OPENROUTER_API_KEY",
          "CODESTRAL_API_KEY",
          "EXA_API_KEY",
          "LAMBDA_LABS_SSH_KEY_NAME",
          "MISTRAL_API_KEY",
          "COHERE_API_KEY",
          "LAMBDA_LABS_SHARED_FS_ID",
          "SNOWFLAKE_USER",
          "JWT_SECRET",
          "WEAVIATE_REST_ENDPOINT",
          "CODACY_API_TOKEN",
          "DOCKER_PERSONAL_ACCESS_TOKEN",
          "KONG_ACCESS_TOKEN",
          "SNOWFLAKE_PASSWORD",
          "SLACK_CLIENT_ID",
          "QWEN_API_KEY",
          "SALESFORCE_ACCESS_TOKEN",
          "GRAFANA_USERNAME",
          "GONG_ACCESS_KEY"
        ]
      },
      {
        "file": "/Users/lynnmusil/sophia-main/.github/workflows/deploy-mcp-production.yml",
        "type": "github_workflow",
        "secrets": [
          "LAMBDA_LABS_SSH_KEY",
          "DOCKER_HUB_PASSWORD"
        ]
      }
    ],
    "issues": [
      "Secrets missing from sync workflow: {'ESTUARY_API_TOKEN', 'LAMBDA_API_KEY', 'NOTION_API_TOKEN', 'SNOWFLAKE_DATABASE', 'HUBSPOT_API_KEY', 'ASANA_ACCESS_TOKEN', 'GITHUB_TOKEN', 'SNOWFLAKE_USERNAME', 'DOCKER_HUB_ACCESS_TOKEN', 'SNOWFLAKE_ROLE', 'GITHUB_APP_ID', 'GITHUB_APP_PRIVATE_KEY', 'SNOWFLAKE_WAREHOUSE', 'FIGMA_PROJECT_ID', 'MEM0_API_KEY', 'SLACK_WEBHOOK_URL', 'LAMBDA_LABS_SSH_KEY', 'GONG_ACCESS_KEY_SECRET', 'POSTGRES_PASSWORD'}",
      "Extra secrets in workflow: {'AIRBYTE_ACCESS_TOKEN', 'HUGGINGFACE_API_TOKEN', 'SNOWFLAKE_ROLE_PROD', 'LAMBDA_LABS_SSH_PRIVATE_KEY', 'GRAFANA_URL', 'ESTUARY_ACCESS_TOKEN', 'CODESTRAL_API_KEY', 'LAMBDA_LABS_CLUSTER_SIZE', 'EXA_API_KEY', 'LAMBDA_LABS_SSH_KEY_NAME', 'GH_API_TOKEN', 'PIPEDREAM_API_KEY', 'MISTRAL_API_KEY', 'RECRAFT_API_KEY', 'APIFY_API_TOKEN', 'HUBSPOT_ACCESS_TOKEN', 'LAMBDA_LABS_ASG_NAME', 'COHERE_API_KEY', 'LAMBDA_LABS_SHARED_FS_ID', 'SLACK_CLIENT_SECRET', 'LAMBDA_LABS_MAX_CLUSTER_SIZE', 'SNOWFLAKE_USER', 'PROMETHEUS_URL', 'LAMBDA_LABS_REGION', 'ENCRYPTION_KEY', 'REDIS_URL', 'ARIZE_API_KEY', 'TAVILY_API_KEY', 'ELEVENLABS_API_KEY', 'VERCEL_API_TOKEN', 'STABILITY_API_KEY', 'JWT_SECRET', 'TOGETHER_AI_API_KEY', 'WEAVIATE_REST_ENDPOINT', 'DOCKER_PERSONAL_ACCESS_TOKEN', 'NOTION_API_KEY', 'LLAMA_API_KEY', 'PHANTOMBUSTER_API_KEY', 'GROQ_API_KEY', 'TWINGLY_API_KEY', 'APOLLO_API_KEY', 'BRAVE_API_KEY', 'KONG_ACCESS_TOKEN', 'API_SECRET_KEY', 'SLACK_CLIENT_ID', 'PINECONE_INDEX_NAME', 'LAMBDA_LABS_INSTANCE_TYPE', 'XAI_API_KEY', 'SNOWFLAKE_DATABASE_PROD', 'ARIZE_SPACE_ID', 'QWEN_API_KEY', 'ZENROWS_API_KEY', 'SALESFORCE_ACCESS_TOKEN', 'SENTRY_DSN', 'DEEPSEEK_API_KEY', 'ASANA_API_TOKEN', 'NPM_API_TOKEN', 'LAMBDA_LABS_SHARED_FS_MOUNT', 'SNOWFLAKE_WAREHOUSE_ANALYTICS', 'VENICE_AI_API_KEY', 'LANGCHAIN_API_KEY', 'PERPLEXITY_API_KEY', 'WEAVIATE_GRPC_ENDPOINT', 'GRAFANA_USERNAME', 'RETOOL_API_TOKEN', 'BACKUP_ENCRYPTION_KEY', 'SERP_API_KEY'}"
    ],
    "recommendations": []
  },
  "statistics": {
    "sync_scripts": 7,
    "workflows": 5,
    "config_files": 25,
    "issues": 2
  },
  "recommendations": [
    "Use ONLY the sync_secrets.yml workflow for syncing",
    "Update sync_from_gh_to_pulumi.py with current secrets",
    "Remove all legacy sync scripts",
    "Standardize on VERCEL_ACCESS_TOKEN",
    "Test with test_secret_access.py regularly"
  ]
}
